FROM docker.io/postgres

RUN apt-get -qq update > /dev/null
RUN apt-get -qq install postgresql-contrib > /dev/null

COPY dvdrental.tar /data/dvdrental.tar
COPY init.sh /docker-entrypoint-initdb.d/init.sh

ENV POSTGRES_USER=postgres
ENV POSTGRES_PASSWORD=c66efc1638e111eca22300d861c8e364
ENV POSTGRES_HOST_AUTH_METHOD=scram-sha-256
ENV POSTGRES_INITDB_ARGS=--auth-host=scram-sha-256

EXPOSE 5432
